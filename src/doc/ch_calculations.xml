<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN" 
  "http://www.docbook.org/xml/5.0/dtd/docbook.dtd">

<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id='calculations'>
  <title>Perform Calculations</title>
  <section xml:id='doing-calculations'>
    <title>Doing Calculations with Data Items</title>
    <para>
      One-off calculations are performed using Data Items. The previous section showed how to select a data item
	  using drilldowns, so have a read of that first if you haven't already.
    </para>
	<para>  
      Once you know the path and UID of the data item you want to use, you simply send a GET request to the item's calculation URL.
	  You provide your input values as query parameters in the URL, and your calculation will be carried out. 
	  For example, to calculate some usage data for the petrol item in the DEFRA_transport_fuel_methodology category, 
	  you would send the following request:
    </para>
	<xi:include href='samples/get_3_categories_DEFRA_transport_fuel_methodology_items_UID_calculation_volume=500.xml' />
    <para>
      The parameters to the GET request are your input values obtained from your user (or application). 
	  Here we just use the <emphasis>volume</emphasis> parameter, 
	  but as each category represents a different methodology or calculation, the input values 
      are different for each one. AMEEdiscover lists which are valid for which categories, as well
      as showing different usage options; which parameters are required, optional, and so on.
    </para>
    <para>
	  In this case, 
      the request will send a value of 500 for this item (which is in litres by default - again, see AMEEdiscover).
	  You can select the units you wish to use for the values in your calculation - see <xref linkend='units' /> 
	  for details.
    </para>
    <para>
      You can perform thousands of different types of calculation by finding the appropriate category and
      data items. By using profiles, you can also store these values, or track how they change over time. 
      We will go into these options in the following chapter.
    </para>
  </section>
  <section xml:id='getting-results'>
    <title>Getting Results</title>
	    <para>
	      The Amounts tag in the response shows separately the amounts of greenhouse gases emitted, by name, often together with 
	      an equivalent amount of CO2 that would have the same climate impact, and other outputs of interest. The exact set 
	      of outputs varies from category to category, as documented in AMEEdiscover. In this case we see that 1151kg of 
	      CO2, plus some other gases, produce the 1156kg of climate-equivalent CO2, or CO2e.
	    </para>
	    <para>
	      Any notes or errors returned by the calculation will also be included in the response.
	    </para>
  </section>
</chapter>
