<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN" 
  "http://www.docbook.org/xml/5.0/dtd/docbook.dtd"
[
<!ENTITY % sgml.features "IGNORE">
<!ENTITY % xml.features "INCLUDE">
<!ENTITY % dbcent PUBLIC "-//OASIS//ENTITIES DocBook Character Entities V4.5//EN" "/opt/local/share/xml/docbook/4.5/dbcentx.mod">
%dbcent;
]>

<section xmlns:xi="http://www.w3.org/2001/XInclude">
	<title>Profiles</title>
  <para>
    A Profile is the basic grouping element in AMEE. A single profile is used to contain all data corresponding to a single entity 
    in a client application. This could be a person, a building, an organisation, etc.; 
    you are free to choose what a profile corresponds to in your application. You can create any number of separate 
    Profiles.
  </para>
  <para>
    Each Profile has a unique identifier or UID such as '6B0DD95CDF3D'.
  </para>
	<para>
	  There  are no distinct properties for a Profile. See also: [wiki:CommonProperties Common Properties]
	</para>
	<section>
		<title>Create Profile</title>
		<para>
			Used to create a new profile, in which ProfileItems can be stored.
		</para>			
		<itemizedlist>
			<listitem>URL: <code>http://{server}/profiles</code></listitem>
			<listitem>Method: <code>POST</code></listitem>
			<listitem>Request format:  <code>application/x-www-form-urlencoded</code></listitem>
			<listitem>Response format: <code>application/xml, application/json</code></listitem>
			<listitem>Response code: <code>200 OK</code></listitem>
			<listitem>Response body: A description of the new profile.</listitem>
		</itemizedlist>			
		<table frame='all'><tgroup cols='3' align='left' colsep='1' rowsep='1'>
			<colspec colnum='3' align='center'/>
			<thead>
				<row>
					<entry>Parameter</entry>
					<entry>Description</entry>
					<entry>Required?</entry>
				</row>
			</thead>
			<tbody>
				<row>					
					<entry>profile</entry>
					<entry>Tells AMEE to create a profile. Should always be 'true'.</entry>
					<entry>&check;</entry>
				</row>
			</tbody></tgroup>
		</table>
		<section role='tabbed'>
		  <section role='tab'>
  			<title>JSON</title>
  			<httprequest>
  			  <header>
POST /profiles HTTP/1.1
Accept: application/json
Content-Type: application/x-www-form-urlencoded
          </header>
          <body>
profile=true
          </body>
        </httprequest>
        <httpresponse>
          <header>
HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
          </header>
  			  <body format='json'>
  			    <xi:include href='samples/json/post_profiles.js' parse="text"/>
  			  </body>
			  </httpresponse>
  		</section>
  		<section role='tab'>
  			<title>XML</title>
  			<httprequest>
  			  <header>
POST /profiles HTTP/1.1
Accept: application/xml
Content-Type: application/x-www-form-urlencoded
          </header>
          <body>
profile=true
          </body>
        </httprequest>
        <httpresponse>
          <header>
HTTP/1.1 200 OK
Content-Type: application/xml; charset=UTF-8
          </header>
          <body format='xml'>
            <xi:include href='samples/xml/post_profiles.xml' parse="text"/>
          </body>
        </httpresponse>
  		</section>
  	</section>
	</section>
	<section>
		<title>List Profiles</title>
		<para>
			Lists all profiles available to the current user. Currently this is the list of all profiles
			created by the current user, but may in future depend on other permissions.
		</para>			
		<itemizedlist>
			<listitem>URL: <code>http://{server}/profiles</code></listitem>
			<listitem>Method: <code>GET</code></listitem>
			<listitem>Response format: <code>application/xml, application/json</code></listitem>
			<listitem>Response code: <code>200 OK</code></listitem>
			<listitem>Response body: A list of Profiles for the current [wiki:User User]</listitem>
		</itemizedlist>			
		<section role='tabbed'>
		  <section role='tab'>
  			<title>JSON</title>
  			<httprequest>
  			  <header>
GET /profiles HTTP/1.1
Accept: application/json
          </header>
    		</httprequest>
  			<httpresponse>
  			  <header>
HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
          </header>
          <body format='json'>
  			    <xi:include href='samples/json/get_profiles.js' parse="text"/>
			    </body>
		    </httpresponse>
  		</section>
		  <section role='tab'>
  			<title>XML</title>
  			<httprequest>
  			  <header>
GET /profiles HTTP/1.1
Accept: application/xml
          </header>
    		</httprequest>
  			<httpresponse>
  			  <header>
HTTP/1.1 200 OK
Content-Type: application/xml; charset=UTF-8
          </header>
          <body format='xml'>
  			    <xi:include href='samples/xml/get_profiles.xml' parse="text"/>
			    </body>
		    </httpresponse>
  		</section>
		</section>
	</section>
	<section>
		<title>Delete Profile</title>
		<para>
			Completely remove a specified profile from the AMEE database, including all Profile Items contained within in.
		</para>			
		<itemizedlist>
			<listitem>URL: <code>http://{server}/profiles/{profile_uid}</code></listitem>
			<listitem>Method: <code>DELETE</code></listitem>
			<listitem>Response code: <code>200 OK</code></listitem>
			<listitem>Response body: None</listitem>
		</itemizedlist>			
		<section role='tabbed'>
		  <section role='tab'>
    		<title>Example</title>
  			<httprequest>
  			  <header>
DELETE /profiles/358E3BCF690E HTTP/1.1
          </header>
  			</httprequest>
  			<httpresponse>
  			  <header>
HTTP/1.1 200 OK
          </header>
  			</httpresponse>
  		</section>
		</section>
	</section>
</section>